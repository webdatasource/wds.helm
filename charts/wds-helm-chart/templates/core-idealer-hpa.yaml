{{- if eq .Values.global.coreServices.mode "MultiService" }}
  {{- $name := "idealer" }}
  {{- $hpaEnabled := .Values.coreServices.idealer.hpa.enabled | default .Values.global.hpa.enabled }}
  {{- if $hpaEnabled }}
    {{ include "wds-helm-chart.hpa" (dict
        "ctx" .
        "name" $name
        "minReplicas" (.Values.coreServices.idealer.hpa.minReplicas | default .Values.global.hpa.minReplicas)
        "maxReplicas" (.Values.coreServices.idealer.hpa.maxReplicas | default .Values.global.hpa.maxReplicas)
        "cpu" (.Values.coreServices.idealer.hpa.targetCPUUtilizationPercentage | default .Values.global.hpa.targetCPUUtilizationPercentage)
        "memory" (.Values.coreServices.idealer.hpa.targetMemoryUtilizationPercentage | default .Values.global.hpa.targetMemoryUtilizationPercentage)
      ) }}
  {{- end }}
{{- end }}

