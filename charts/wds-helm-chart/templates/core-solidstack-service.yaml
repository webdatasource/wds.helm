{{- if eq .Values.global.coreServices.mode "SingleService" }}
{{- $labels := (merge (default (dict) .Values.coreServices.solidstack.serviceExtraLabelsOverride) (default (dict) .Values.global.serviceExtraLabels)) }}
{{- $ports := list (dict "name" "http" "port" 80 "protocol" "TCP") }}
{{- $selector := (include "wds-helm-chart.selectorLabels" . | fromYaml) }}

{{ include "wds-helm-chart.service" (dict 
  "ctx" . 
  "name" "solidstack" 
  "labels" $labels 
  "type" "LoadBalancer"
  "ports" $ports
  "selector" $selector
) }}
{{- end }}
