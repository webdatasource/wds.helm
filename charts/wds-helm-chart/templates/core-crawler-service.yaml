{{- if eq .Values.global.coreServices.mode "MultiService" }}
{{- $labels := (merge (default (dict) .Values.coreServices.crawler.serviceExtraLabelsOverride) (default (dict) .Values.global.serviceExtraLabels)) }}
{{- $ports := list (dict "name" "grpc-web" "port" 8082 "protocol" "TCP") }}
{{- $selector := (include "wds-helm-chart.selectorLabels" . | fromYaml) }}

{{ include "wds-helm-chart.service" (dict 
  "ctx" . 
  "name" "crawler" 
  "labels" $labels 
  "type" "LoadBalancer"
  "ports" $ports
  "selector" $selector
) }}
{{- end }}
